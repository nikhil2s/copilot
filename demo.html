<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Todo App</title>

    <!-- External stylesheet: Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
// git file added
    <style>
        :root{
            --bg:#0f1724;
            --card:#0b1220;
            --muted:#9aa4b2;
            --accent:#60a5fa;
            --success:#34d399;
            --danger:#fb7185;
            --glass: rgba(255,255,255,0.03);
            --radius:12px;
            --shadow: 0 6px 18px rgba(2,6,23,0.6);
        }
        *{box-sizing:border-box}
        html,body{height:100%}
        body{
            margin:0;
            font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: linear-gradient(180deg, #071022 0%, #071021 60%), var(--bg);
            color:#e6eef6;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:32px;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }

        .app{
            width:100%;
            max-width:720px;
            background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            border-radius:var(--radius);
            box-shadow:var(--shadow);
            padding:22px;
            border:1px solid rgba(255,255,255,0.03);
        }

        header{
            display:flex;
            align-items:center;
            gap:16px;
            margin-bottom:18px;
        }
        header h1{
            margin:0;
            font-size:20px;
            font-weight:600;
            letter-spacing:-0.2px;
        }
        header p{
            margin:0;
            color:var(--muted);
            font-size:13px;
        }

        .input-row{
            display:flex;
            gap:10px;
            margin-bottom:14px;
        }
        .input-row input[type="text"]{
            flex:1;
            padding:12px 14px;
            border-radius:10px;
            border:1px solid rgba(255,255,255,0.03);
            background:var(--glass);
            color:var(--muted);
            outline:none;
            transition:box-shadow .12s ease,border-color .12s ease;
        }
        .input-row input[type="text"]:focus{
            box-shadow:0 4px 14px rgba(96,165,250,0.12);
            border-color: rgba(96,165,250,0.28);
            color:#e6eef6;
        }
        .btn{
            background:linear-gradient(180deg,var(--accent),#3b82f6);
            color:white;
            border:0;
            padding:10px 14px;
            border-radius:10px;
            cursor:pointer;
            font-weight:600;
        }
        .btn.ghost{
            background:transparent;
            border:1px solid rgba(255,255,255,0.04);
            color:var(--muted);
        }

        .controls{
            display:flex;
            gap:8px;
            align-items:center;
            margin-bottom:12px;
            flex-wrap:wrap;
        }
        .filters{
            display:flex;
            gap:8px;
        }
        .filter-btn{
            padding:8px 12px;
            border-radius:8px;
            background:transparent;
            color:var(--muted);
            border:1px solid rgba(255,255,255,0.02);
            cursor:pointer;
        }
        .filter-btn.active{
            background:rgba(96,165,250,0.12);
            color:var(--accent);
            border-color:rgba(96,165,250,0.18);
        }

        ul.todo-list{
            list-style:none;
            margin:0;
            padding:0;
            display:block;
            border-top:1px dashed rgba(255,255,255,0.02);
        }
        li.todo{
            display:flex;
            align-items:center;
            gap:12px;
            padding:12px;
            border-bottom:1px dashed rgba(255,255,255,0.02);
        }
        .todo .checkbox{
            width:18px;height:18px;
            border-radius:5px;
            border:1px solid rgba(255,255,255,0.06);
            background:transparent;
            flex-shrink:0;
            display:inline-grid;
            place-items:center;
            cursor:pointer;
        }
        .todo.completed .checkbox{
            background:linear-gradient(180deg,var(--success),#10b981);
            border-color:transparent;
        }
        .todo label{
            flex:1;
            color:var(--muted);
            cursor:text;
        }
        .todo.completed label{
            text-decoration:line-through;
            color:rgba(255,255,255,0.35);
        }
        .actions{
            display:flex;
            gap:8px;
            align-items:center;
        }
        .icon-btn{
            background:transparent;
            border:0;
            color:var(--muted);
            cursor:pointer;
            padding:6px;
            border-radius:8px;
        }
        .icon-btn:hover{background:rgba(255,255,255,0.02)}
        .count{
            color:var(--muted);
            font-size:13px;
        }

        .empty{
            padding:18px;
            text-align:center;
            color:var(--muted);
        }

        @media (max-width:480px){
            .input-row{flex-direction:column}
            .controls{gap:6px}
        }
    </style>
</head>
<body>
    <main class="app" id="app" aria-labelledby="title">
        <header>
            <div>
                <h1 id="title">Demo Todo App</h1>
                <p>Small accessible todo list with localStorage</p>
            </div>
        </header>

        <section aria-label="Add todo">
            <div class="input-row">
                <input id="newTodo" type="text" autocomplete="off" placeholder="Add a new task and press Enter" aria-label="New todo">
                <button id="addBtn" class="btn" aria-label="Add todo">Add</button>
            </div>
        </section>

        <section class="controls" aria-label="Controls">
            <div class="filters" role="tablist" aria-label="Filter todos">
                <button class="filter-btn active" data-filter="all" role="tab" aria-selected="true">All</button>
                <button class="filter-btn" data-filter="active" role="tab" aria-selected="false">Active</button>
                <button class="filter-btn" data-filter="completed" role="tab" aria-selected="false">Completed</button>
            </div>
            <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
                <span class="count" id="count">0 items</span>
                <button id="clearCompleted" class="btn ghost" title="Clear completed">Clear completed</button>
            </div>
        </section>

        <ul class="todo-list" id="list" aria-live="polite" aria-label="Todo list">
            <!-- items injected here -->
        </ul>

        <div id="empty" class="empty" hidden>
            No tasks yet. Add one above.
        </div>
    </main>

    <script>
        // Simple Todo App (single-file)
        (function(){
            const STORAGE_KEY = 'demo.todos.v1';
            const newTodoInput = document.getElementById('newTodo');
            const addBtn = document.getElementById('addBtn');
            const listEl = document.getElementById('list');
            const countEl = document.getElementById('count');
            const clearBtn = document.getElementById('clearCompleted');
            const filters = Array.from(document.querySelectorAll('.filter-btn'));
            const emptyEl = document.getElementById('empty');

            let todos = load();
            let filter = 'all';

            function uid(){ return Date.now().toString(36) + Math.random().toString(36).slice(2,8); }

            function load(){
                try{
                    const raw = localStorage.getItem(STORAGE_KEY);
                    return raw ? JSON.parse(raw) : [];
                }catch(e){
                    return [];
                }
            }
            function save(){
                localStorage.setItem(STORAGE_KEY, JSON.stringify(todos));
            }

            function createTodo(text){
                return { id: uid(), text: text.trim(), completed:false, created:Date.now() };
            }

            function add(text){
                if(!text || !text.trim()) return;
                todos.unshift(createTodo(text));
                save();
                render();
            }

            function toggle(id){
                const t = todos.find(x => x.id===id);
                if(!t) return;
                t.completed = !t.completed;
                save();
                render();
            }

            function remove(id){
                todos = todos.filter(x => x.id !== id);
                save();
                render();
            }

            function updateText(id, newText){
                const t = todos.find(x => x.id===id);
                if(!t) return;
                t.text = newText.trim();
                save();
                render();
            }

            function clearCompleted(){
                todos = todos.filter(x => !x.completed);
                save();
                render();
            }

            function filtered(){
                if(filter === 'active') return todos.filter(t => !t.completed);
                if(filter === 'completed') return todos.filter(t => t.completed);
                return todos;
            }

            function render(){
                listEl.innerHTML = '';
                const items = filtered();
                if(items.length === 0){
                    emptyEl.hidden = false;
                } else {
                    emptyEl.hidden = true;
                }
                items.forEach(t => {
                    const li = document.createElement('li');
                    li.className = 'todo' + (t.completed ? ' completed' : '');
                    li.dataset.id = t.id;

                    li.innerHTML = `
                        <button class="checkbox" aria-pressed="${t.completed}" title="${t.completed ? 'Mark as active' : 'Mark as completed'}" aria-label="Toggle complete">
                            ${t.completed ? 'âœ“' : ''}
                        </button>
                        <label tabindex="0">${escapeHtml(t.text)}</label>
                        <div class="actions">
                            <button class="icon-btn edit" title="Edit" aria-label="Edit task">âœŽ</button>
                            <button class="icon-btn delete" title="Delete" aria-label="Delete task">ðŸ—‘</button>
                        </div>
                    `;
                    listEl.appendChild(li);
                });

                const remaining = todos.filter(t => !t.completed).length;
                countEl.textContent = remaining + (remaining === 1 ? ' item' : ' items');

                // update filter buttons' aria-selected
                filters.forEach(f => {
                    f.classList.toggle('active', f.dataset.filter === filter);
                    f.setAttribute('aria-selected', String(f.dataset.filter === filter));
                });
            }

            // HTML-escape to avoid injection
            function escapeHtml(s){
                return String(s)
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;');
            }

            // Event handlers
            addBtn.addEventListener('click', ()=>{ add(newTodoInput.value); newTodoInput.value=''; newTodoInput.focus(); });

            newTodoInput.addEventListener('keydown', (e)=>{
                if(e.key === 'Enter'){ add(newTodoInput.value); newTodoInput.value=''; }
            });

            listEl.addEventListener('click', (e)=>{
                const li = e.target.closest('li.todo');
                if(!li) return;
                const id = li.dataset.id;
                if(e.target.classList.contains('checkbox')){
                    toggle(id);
                } else if(e.target.classList.contains('delete')){
                    remove(id);
                } else if(e.target.classList.contains('edit')){
                    startEdit(li, id);
                }
            });

            // double click label to edit and Enter/Escape handling
            listEl.addEventListener('dblclick', (e)=>{
                const lbl = e.target.closest('label');
                if(!lbl) return;
                const li = lbl.closest('li.todo');
                startEdit(li, li.dataset.id);
            });

            // Filters
            filters.forEach(f=>{
                f.addEventListener('click', ()=>{
                    filter = f.dataset.filter;
                    render();
                });
            });

            clearBtn.addEventListener('click', ()=>{ clearCompleted(); });

            function startEdit(li, id){
                const t = todos.find(x=>x.id===id);
                if(!t) return;
                const label = li.querySelector('label');
                const input = document.createElement('input');
                input.type = 'text';
                input.value = t.text;
                input.className = 'editing';
                input.style.padding = '8px';
                input.style.borderRadius = '8px';
                input.style.width = '100%';
                input.style.boxSizing = 'border-box';
                label.replaceWith(input);
                input.focus();
                input.select();

                function finish(saveChanges){
                    input.removeEventListener('blur', onBlur);
                    input.removeEventListener('keydown', onKey);
                    if(saveChanges){
                        const val = input.value.trim();
                        if(val) updateText(id, val);
                        else remove(id);
                    } else {
                        render();
                    }
                }
                function onBlur(){ finish(true); }
                function onKey(e){
                    if(e.key === 'Enter'){ finish(true); }
                    else if(e.key === 'Escape'){ finish(false); }
                }
                input.addEventListener('blur', onBlur);
                input.addEventListener('keydown', onKey);
            }

            // Initialize sample data if none exist for demo
            if(todos.length === 0){
                todos = [
                    {id:uid(), text:'Welcome to the demo todo app', completed:false, created:Date.now()},
                    {id:uid(), text:'Click checkbox to complete', completed:false, created:Date.now()},
                    {id:uid(), text:'Double-click or press edit to change text', completed:false, created:Date.now()}
                ];
                save();
            }

            render();
        })();
    </script>
</body>
</html>